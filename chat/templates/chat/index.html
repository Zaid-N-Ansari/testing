{% extends "base.html" %}
{% block title %}Chat{% endblock title %}

{% block content %}
<style>
	textarea {
		outline: none;
		background-color: var(--bs-body-bg);
		resize: none;
	}

	div.h-custom {
		height: 90vh;
	}

	.list-group-item.active {
		background-color: var(--bs-border-color) !important;
	}

	.bubble {
		--r: 0.5em;
		--t: 1.2em;
		max-width: 80vw;
		width: fit-content;
		padding: calc(var(--bs-gutter-x) * 0.4);
		border-inline: var(--t) solid #0000;
		border-radius: calc(var(--r) + var(--t))/var(--r);
		mask: radial-gradient(100% 100% at var(--_p) 100%, #0000 99%, #000 102%) var(--_p) 0%/var(--t) var(--t) no-repeat, linear-gradient(#000 0 0) padding-box;
		background-color: var(--bs-border-color);
		margin: 0px 0px 10px 0px;
	}

	.left {
		--_p: 0;
		border-top-left-radius: 0 0;
	}

	.right {
		--_p: 100%;
		border-top-right-radius: 0 0;
		margin: auto 0px auto auto;
	}

	@media (max-width:768px) {
		div.h-custom {
			height: 84vh !important;
		}

		div.h-sm-custom {
			height: max-content !important;
		}
	}
</style>
<div class="container-fluid h-full">
	<div class="row flex-md-row flex-lg-row flex-column justify-content-center">
		<div class="col-12 col-md-4 col-lg-2 pe-md-1 pe-lg-1 pb-2 pb-md-0 pb-lg-0">
			<div class="card h-custom h-sm-custom shadow m-0">
				<h5 class="card-header text-center">
					Your Friends and Groups
				</h5>
				<div class="card-body d-flex flex-row flex-md-column flex-lg-column pt-1 pb-2 px-1 w-100 align-items-start justify-content-start list-group"
					style="overflow: scroll;">
					{% for friend in friends %}
					<button data-id="{{ friend }}"
						class="list-group-item list-group-item-action d-flex flex-column flex-md-row flex-lg-row align-items-start justify-content-between border p-2 rounded mt-2 w-100 ms-1 me-1 ms-md-0 me-md-0 ms-lg-0 me-lg-0">
						<img style="width: 3rem;" src="{{ friend.profile_image.url }}" class="rounded-circle"
							loading="lazy" />
						<p class="lead small m-0">{{ friend }}</p>
					</button>
					{% endfor%}
				</div>
			</div>
		</div>


		<div class="col-12 col-md-8 col-lg-8 ps-md-1 ps-lg-1">
			<div class="card h-custom shadow m-0">
				<h5 class="card-header d-flex align-items-center justify-content-between user-select-none">
					<span>{{ to }}</span>
					<span data-toggle="tooltip" data-placement="left" title="Connecting..." class="material-icons"
						style="font-size: 1rem; cursor:default;">radio_button_checked</span>
				</h5>
				<div class="card-body user-select-none" style="overflow: scroll;">
					<div class="bubble left">Bro ipsum dolor sit amet gaper backside single track, manny Bike epic
						clipless. Schraeder drop gondy, rail fatty slash gear jammer steepsBro ipsum dolor sit amet gaper backside single track, manny Bike epic
						clipless. Schraeder drop gondy, rail fatty slash gear jammer steepsBro ipsum dolor sit amet gaper backside single track, manny Bike epic
						clipless. Schraeder drop gondy, rail fatty slash gear jammer steepsBro ipsum dolor sit amet gaper backside single track, manny Bike epic
						clipless. Schraeder drop gondy, rail fatty slash gear jammer steepsBro ipsum dolor sit amet gaper backside single track, manny Bike epic
						clipless. Schraeder drop gondy, rail fatty slash gear jammer steepsBro ipsum dolor sit amet gaper backside single track, manny Bike epic
						clipless. Schraeder drop gondy, rail fatty slash gear jammer steeps</div>
					<div class="bubble right">Ok, Thank you</div>
					<div class="bubble left"> ut labore et dolore magna </div>
					<div class="bubble right">ðŸ‘Œ</div>
				</div>
				<div class="d-flex align-items-between w-100 m-auto py-2 border-top card-tools"
					style="background-color: var(--bs-card-cap-bg);">
					<div class="w-75 d-flex align-items-center justify-content-evenly">
						<button class="btn" type="button">
							<span class="material-icons">attach_file</span>
						</button>
						<textarea name="input-msg" id="input-msg" class="w-75 rounded"></textarea>
					</div>
					<div class="d-flex align-items-center justify-content-evenly w-25">
						<button class="btn" type="button">
							<span class="material-icons">add_reaction</span>
						</button>
						<button id="send-msg-btn" class="btn" type="button">
							<span class="material-icons">send</span>
						</button>
					</div>
					<script>// include snippets/chat.js</script>
				</div>
			</div>
		</div>
	</div>
</div>
<script>{% include 'chat/chat.js' %}</script>
{% endblock content %}